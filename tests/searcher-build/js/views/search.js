define(["Underscore","Backbone","app","text!templates/search.html"],function(e,t,n,r){var i=t.View.extend({el:".search",events:{"click .search-button":"setQuery"},searchTemplate:e.template(r),optionTemplate:e.template("<option value='<%= id %>'><%= name %></option>"),initialize:function(){this.model.on("change",this.applyQuery,this),this.render()},setQuery:function(){var e=this.searchInput.val(),t=this.sourceSelect.val();this.model.set({term:e,sourceId:t})},applyQuery:function(){var e=this.model.get("term"),t=this.model.get("sourceId");this.searchInput.val(e),this.sourceSelect.val(t)},render:function(){return this.$el.empty().append(this.searchTemplate()),this.searchInput=this.$(".search-input"),this.sourceSelect=this.$(".source-select"),this.applyQuery(),this},addSources:function(e){for(var t in e)this.sourceSelect.append(this.optionTemplate({id:t,name:e[t].get("name")}))}});return i});